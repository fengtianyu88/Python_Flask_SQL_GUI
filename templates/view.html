<!DOCTYPE html>
<html lang="en">
<head>
    <style>
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 6px;
}
</style>
     <script>
    function getData(){
     var xhttp = new XMLHttpRequest();
	    xhttp.onreadystatechange = function() {
		     if (this.readyState == 4 && this.status == 200) {
	     	 document.getElementById("searchDiv").innerHTML = this.responseText;
	     }
	   }
		var userRequestURL ='getData';
	   xhttp.open("post", userRequestURL, true);
	   var userRequest;
	   userRequest = new FormData();
	   userRequest.set('fname', document.getElementById("fname").value);
       userRequest.set('lname', document.getElementById("lname").value);
       userRequest.set('id', document.getElementById("id").value);
       userRequest.set('period', document.getElementById("period").value);
	   xhttp.send(userRequest);
     }
    function getDataDriver(){
    getData();
    return false;
    }
     </script>

</head>
    <meta charset="UTF-8">
    <title>View the current database</title>
<h3> Fill out the form and submit to add a student to the database</h3> <br>
    <form onsubmit="getDataDriver()" method="post">
        <input type="button"  onclick="getData()" value="Find Student"><br>
        First name: <input id="fname" type="text" name="fname"><br>
        Last name: <input id="lname" type="text" name="lname"><br>
        Student ID: <input id="id" type="number" name="id" min="1000000" max="9999999" step="1"><br>
        Class Period: <input id="period" type="number" name="period" min="0" max="8" step="1"><br>
    </form> <br>

<div id="searchDiv">
</div>
    <br>
    <h3> Full Student list: </h3>
    <div id = 'tablediv'>
        <table>
        <tr>
         <th>Student ID</th>
         <th>First Name</th>
         <th>Last Name</th>
         <th>Class Period</th>
        </tr>
    {% for student in data %}
        <tr>
         <td>{{student.id}}</td>
         <td>{{student.fname}}</td>
         <td>{{student.lname}}</td>
         <td>{{student.classperiod}}</td>
        </tr>

    {% endfor %}
        </table>
    </div>

   {% if True %}
    <div>
        <br>
    <input type="button" onclick="location.href='/';" value="Return to Mainpage" />
    </div>
    {% endif %}




<body>

</body>
</html>